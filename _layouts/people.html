---
layout: default-full
---

<main class="container-lg pb-3 flex-fill">
    <div class="row pt-4">
        <div class="col-12">
            <h1 class="mb-4">{{ page.title }}</h1>
            {% if page.description %}
            <p class="lead">{{ page.description }}</p>
            {% endif %}
        </div>
    </div>

    <div class="row">
        <!-- Colonna principale -->
        <div class="col-lg-9 order-2 order-lg-1">
            <div class="row">
                {% if page.data_type == 'docenti' %}
                    {% assign people_data = site.data.docenti[page.data_source] %}
                {% elsif page.data_type == 'studenti' %}
                    {% assign people_data = site.data.studenti[page.data_source] %}
                {% else %}
                    {% assign people_data = site.data.didattica[page.data_source] %}
                {% endif %}
                {% for person in people_data %}
        <div class="col-12 col-md-6 col-lg-3 mb-4">
            <div class="card h-100 shadow-sm">
                {% assign img_src = person.image | default: "/assets/images/docenti/placeholder.png" %}
                {% assign display_name = person.name | default: person.nome %}
                <img src="{{ img_src }}" class="card-img-top" alt="{{ display_name }}" style="height: 250px; object-fit: cover;" onerror="this.onerror=null; this.src='/assets/images/docenti/placeholder.png';">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ display_name }}</h5>
                    {% if page.data_type == 'studenti' %}
                        {% if person.anno_accademico %}
                        <p class="card-text"><small class="text-muted">{{ person.anno_accademico }}</small></p>
                        {% endif %}
                    {% else %}
                        {% if person.role %}
                        <p class="card-text"><small class="text-muted">{{ person.role }}</small></p>
                        {% endif %}
                        {% if person.institution %}
                        <p class="card-text"><strong>{{ person.institution }}</strong></p>
                        {% endif %}
                    {% endif %}
                    <div class="mt-auto">
                        <button type="button" class="btn btn-primary btn-sm w-100" data-toggle="modal" data-target="#modal{{ forloop.index }}">
                            Bio
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="modal{{ forloop.index }}" tabindex="-1" aria-labelledby="modalLabel{{ forloop.index }}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalLabel{{ forloop.index }}">{{ display_name }}</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-4 text-center mb-3">
                                <img src="{{ img_src }}" class="img-fluid rounded" alt="{{ display_name }}" onerror="this.onerror=null; this.src='/assets/images/docenti/placeholder.png';">
                            </div>
                            <div class="col-md-8">
                                {% if page.data_type == 'studenti' %}
                                    {% if person.anno_accademico %}
                                    <p><strong>Anno Accademico:</strong> {{ person.anno_accademico }}</p>
                                    {% endif %}
                                {% else %}
                                    {% if person.role %}
                                    <p><strong>Ruolo:</strong> {{ person.role }}</p>
                                    {% endif %}
                                    {% if person.institution %}
                                    <p><strong>Istituzione:</strong> {{ person.institution }}</p>
                                    {% endif %}
                                {% endif %}
                                <hr>
                                <h6>Biografia</h6>
                                <p>{{ person.bio }}</p>
                                {% if person.email %}
                                <p><strong>Email:</strong> <a href="mailto:{{ person.email }}">{{ person.email }}</a></p>
                                {% endif %}
                                {% if person.website %}
                                <p><strong>Website:</strong> <a href="{{ person.website }}" target="_blank">{{ person.website }}</a></p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Chiudi</button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
            </div>
        </div>

        <!-- Sidebar sticky con menu edizioni -->
        <div class="col-lg-3 order-1 order-lg-2 mb-4 mb-lg-0">
            <div class="sidebar-info bg-light p-4 rounded sticky-top" style="top: 60px; z-index: 0;">
                <h5 class="mb-3">Edizioni</h5>
                <nav class="nav flex-column">
                    {% if page.data_type == 'docenti' %}
                        {% assign editions = site.data.edizioni %}
                        {% for edizione in editions %}
                            {% assign docenti_url = '/docenti/' | append: edizione.year | append: '/' %}
                            <a class="nav-link {% if docenti_url == page.url %}active font-weight-bold{% endif %}" href="{{ docenti_url }}">
                                {{ edizione.label }}
                            </a>
                        {% endfor %}
                    {% elsif page.data_type == 'studenti' %}
                        {% assign editions = site.data.edizioni %}
                        {% for edizione in editions %}
                            {% assign studenti_url = '/studenti/' | append: edizione.year | append: '/' %}
                            <a class="nav-link {% if studenti_url == page.url %}active font-weight-bold{% endif %}" href="{{ studenti_url }}">
                                {{ edizione.label }}
                            </a>
                        {% endfor %}
                    {% else %}
                        {% for edizione in site.data.edizioni %}
                        <a class="nav-link {% if edizione.url == page.url %}active font-weight-bold{% endif %}" href="{{ edizione.url }}">
                            {{ edizione.label }}
                        </a>
                        {% endfor %}
                    {% endif %}
                </nav>
            </div>
        </div>
    </div>
</main>
